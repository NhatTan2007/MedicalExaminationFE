<div *ngIf="medicalRecord != null">
	<label for="obstetricsAndGynecologyExamination" class="btn btn-info">Chẩn đoán mắt</label>
	<form [formGroup]="updateForm" #ophthalmologyExamination (ngSubmit)="onSubmit()"
		*ngIf="medicalRecord.details.ophthalmologyExamination.isRegistered">
		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="leftEyeSightWithoutGlass">Mắt trái không kính</label>
				<input #leftEyeSightWithoutGlass [class.is-invalid]="(isTouched('leftEyeSightWithoutGlass') && leftError)
			  	|| (showErrors && leftError)" class="form-control" (change)="checkErrors()"
					formControlName="leftEyeSightWithoutGlass">
				<span class="invalid-feedback d-block" *ngIf="(isTouched('leftEyeSightWithoutGlass') && leftError)
				|| (showErrors && leftError)">Phải điền 1 trong 2 mắt trái có kính hoặc không kính</span>
			</div>
			<div class="form-group col-sm-6">
				<label for="rightEyeSightWithoutGlass">Mắt phải không kính</label>
				<input #rightEyeSightWithoutGlass [class.is-invalid]="(isTouched('rightEyeSightWithoutGlass') && rightError)
				|| (showErrors && rightError)" class="form-control" (change)="checkErrors()"
					formControlName="rightEyeSightWithoutGlass">
				<span class="invalid-feedback d-block" *ngIf="(isTouched('rightEyeSightWithoutGlass') && rightError)
				|| (showErrors && rightError)">Phải điền 1 trong 2 mắt phải có kính hoặc không kính</span>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="leftEyeSightWithGlass">Mắt trái có kính</label>
				<input #leftEyeSightWithGlass [class.is-invalid]="(isTouched('leftEyeSightWithGlass') && leftError)
				|| (showErrors && leftError)" class="form-control" (change)="checkErrors()"
					formControlName="leftEyeSightWithGlass">
				<span class="invalid-feedback d-block" *ngIf="(isTouched('leftEyeSightWithGlass') && leftError)
				|| (showErrors && leftError)">Phải điền 1 trong 2 mắt trái có kính hoặc không kính</span>
			</div>
			<div class="form-group col-sm-6">
				<label for="rightEyeSightWithGlass">Mắt phải có kính</label>
				<input #rightEyeSightWithGlass [class.is-invalid]="(isTouched('rightEyeSightWithGlass') && rightError)
				|| (showErrors && rightError)" class="form-control" (change)="checkErrors()"
					formControlName="rightEyeSightWithGlass">
				<span class="invalid-feedback d-block" *ngIf="(isTouched('rightEyeSightWithGlass') && rightError)
				|| (showErrors && rightError)">Phải điền 1 trong 2 mắt phải có kính hoặc không kính</span>
			</div>
		</div>
		<div class="form-group mt-3">
			<label for="eyeDiseases">Các bệnh về mắt (nếu có)</label>
			<textarea #eyeDiseases class="form-control" rows="2"
				formControlName="eyeDiseases"></textarea>
		</div>
		<div class="form-group mt-3">
			<label for="ophthalmologyLevel">Phân loại</label>
			<input type="number" min="1" #ophthalmologyLevel [class.is-invalid]="(isError('ophthalmologyLevel') && isTouched('ophthalmologyLevel'))
      		|| (isError('ophthalmologyLevel') && showErrors)" class="form-control" formControlName="ophthalmologyLevel">
		<span class="invalid-feedback d-block" *ngIf="(hasError('ophthalmologyLevel', 'required') && isTouched('ophthalmologyLevel'))
			|| (showErrors && hasError('ophthalmologyLevel', 'required'))">Không được để trống</span>
		<span class="invalid-feedback d-block" *ngIf="(hasError('ophthalmologyLevel', 'min') && isTouched('ophthalmologyLevel'))
			|| (showErrors && hasError('ophthalmologyLevel', 'min'))">Giá trị nhập không được nhỏ hơn 1</span>
		</div>
		<div class=" mt-2 d-flex justify-content-end">
			<button type="submit" class="btn btn-primary mb-5 ">Ghi nội dung</button>
		</div>
	</form>
	<div *ngIf="!this.medicalRecord.details.ophthalmologyExamination.isRegistered" class="text-center">
		<h3 class="btn btn-warning">Bệnh nhân không đăng ký khám dịch vụ này</h3>
	</div>
</div>

<div *ngIf="medicalRecord == null" class="text-center">
	<h1 class="text-center mt-5 btn btn-info">Xin mời chọn bệnh án</h1>
</div>

<ngx-spinner fullScreen=false color="#fff" type="ball-clip-rotate">
</ngx-spinner>