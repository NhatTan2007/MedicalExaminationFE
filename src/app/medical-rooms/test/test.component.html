<div *ngIf="medicalRecord != null" class="mt-2">
	<label for="BloodTests" class="btn btn-info">Xét nghiệm máu</label>
	<form [formGroup]="updateBloodTestsForm" #BloodTests (ngSubmit)="onSubmitBloodTests()"
		*ngIf="this.medicalRecord.details.bloodTests.isRegistered">
		<label><strong>Công thức máu</strong></label>
		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="hcAmount">Số lượng HC (10<sup>12</sup>/l)</label>
				<input type="number" min="0" #hcAmount [class.is-invalid]="(isError(updateBloodTestsForm, 'hcAmount') && isTouched(updateBloodTestsForm, 'hcAmount'))
				|| (isError(updateBloodTestsForm, 'hcAmount') && showBloodTestsErrors)" class="form-control" formControlName="hcAmount">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'hcAmount', 'required') && isTouched(updateBloodTestsForm, 'hcAmount'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'hcAmount', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'hcAmount', 'min') && isTouched(updateBloodTestsForm, 'hcAmount'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'hcAmount', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
			<div class="form-group col-sm-6">
				<label for="leukocytesAmount">Số lượng bạch cầu (10<sup>9</sup>/l)</label>
				<input type="number" min="0" #leukocytesAmount [class.is-invalid]="(isError(updateBloodTestsForm, 'leukocytesAmount')
					&& isTouched(updateBloodTestsForm, 'leukocytesAmount'))
				  || (isError(updateBloodTestsForm, 'leukocytesAmount') && showBloodTestsErrors)" class="form-control" formControlName="leukocytesAmount">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'leukocytesAmount', 'required') && isTouched(updateBloodTestsForm, 'leukocytesAmount'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'leukocytesAmount', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'leukocytesAmount', 'min') && isTouched(updateBloodTestsForm, 'leukocytesAmount'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'leukocytesAmount', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
		</div>

		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="plateletsAmount">Số lượng tiểu cầu (10<sup>9</sup>/l)</label>
				<input type="number" #plateletsAmount [class.is-invalid]="(isError(updateBloodTestsForm, 'plateletsAmount') && isTouched(updateBloodTestsForm, 'plateletsAmount'))
				|| (isError(updateBloodTestsForm, 'plateletsAmount') && showBloodTestsErrors)" class="form-control" formControlName="plateletsAmount">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'plateletsAmount', 'required') && isTouched(updateBloodTestsForm, 'plateletsAmount'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'plateletsAmount', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'plateletsAmount', 'min') && isTouched(updateBloodTestsForm, 'plateletsAmount'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'plateletsAmount', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
		</div>
		<label><strong>Sinh hóa máu</strong></label>
		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="bloodSugar">Đường máu (mmol/l)</label>
				<input type="number" min="0" #bloodSugar 
				[class.is-invalid]="(isError(updateBloodTestsForm, 'bloodSugar') && isTouched(updateBloodTestsForm, 'bloodSugar'))
				  || (isError(updateBloodTestsForm, 'bloodSugar') && showBloodTestsErrors)" class="form-control" formControlName="bloodSugar">
				  <span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'bloodSugar', 'required') && isTouched(updateBloodTestsForm, 'bloodSugar'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'bloodSugar', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'bloodSugar', 'min') && isTouched(updateBloodTestsForm, 'bloodSugar'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'bloodSugar', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
	
			<div class="form-group col-sm-6">
				<label for="ure">Ure (mmol/l)</label>
				<input type="number" min="0" #ure [class.is-invalid]="(isError(updateBloodTestsForm, 'ure') && isTouched(updateBloodTestsForm, 'ure'))
				|| (isError(updateBloodTestsForm, 'ure') && showBloodTestsErrors)" class="form-control" formControlName="ure">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'ure', 'required') && isTouched(updateBloodTestsForm, 'ure'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'ure', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'ure', 'min') && isTouched(updateBloodTestsForm, 'ure'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'ure', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
		</div>

		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="creatinin">Creatinin</label>
				<input type="number" #creatinin
				[class.is-invalid]="(isError(updateBloodTestsForm, 'creatinin') && isTouched(updateBloodTestsForm, 'creatinin'))
				|| (isError(updateBloodTestsForm, 'creatinin') && showBloodTestsErrors)" class="form-control" formControlName="creatinin">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'creatinin', 'required') && isTouched(updateBloodTestsForm, 'creatinin'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'creatinin', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'creatinin', 'min') && isTouched(updateBloodTestsForm, 'creatinin'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'creatinin', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
	
			<div class="form-group col-sm-6">
				<label for="asatgot">ASAT(GOT) (U/L)</label>
				<input type="number" min="0" #asatgot [class.is-invalid]="(isError(updateBloodTestsForm, 'asatgot') && isTouched(updateBloodTestsForm, 'asatgot'))
				  || (isError(updateBloodTestsForm, 'asatgot') && showBloodTestsErrors)" class="form-control" formControlName="asatgot">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'asatgot', 'required') && isTouched(updateBloodTestsForm, 'asatgot'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'asatgot', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'asatgot', 'min') && isTouched(updateBloodTestsForm, 'asatgot'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'asatgot', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
		</div>

		<div class="form-row">
			<div class="form-group col-sm-6 pl-0">
				<label for="alatgpt">ALAT(GPT) (U/L)</label>
				<input type="number" min="0" #alatgpt 
				[class.is-invalid]="(isError(updateBloodTestsForm, 'alatgpt') && isTouched(updateBloodTestsForm, 'alatgpt'))
				|| (isError(updateBloodTestsForm, 'alatgpt') && showBloodTestsErrors)" class="form-control" formControlName="alatgpt">
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'asatgot', 'required') && isTouched(updateBloodTestsForm, 'asatgot'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'asatgot', 'required'))">Không được để trống</span>
				<span class="invalid-feedback d-block" *ngIf="(hasError(updateBloodTestsForm, 'asatgot', 'min') && isTouched(updateBloodTestsForm, 'asatgot'))
				|| (showBloodTestsErrors && hasError(updateBloodTestsForm, 'asatgot', 'min'))">Giá trị nhập không được nhỏ hơn 0</span>
			</div>
		</div>

		<div class=" mt-2 d-flex justify-content-end">
			<button type="submit" class="btn btn-primary mb-5 ">Ghi nội dung</button>
		</div>
	</form>
	<div *ngIf="!this.medicalRecord.details.bloodTests.isRegistered" class="text-center">
		<h3 class="btn btn-warning">Bệnh nhân không đăng ký khám dịch vụ này</h3>
	</div>
	<label for="BloodTests" class="btn btn-info">Xét nghiệm nước tiểu</label>
	<form [formGroup]="updateClinicalUrineTestsForm" #ClinicalUrineTests (ngSubmit)="onSubmitClinicalUrineTests()"
		*ngIf="this.medicalRecord.details.clinicalUrineTests.isRegistered">
		<div class="form-row">
			<div class="form-group col-sm-6">
				<label for="sugar" class="mr-2 w-100">Đường</label>
				<mat-radio-group class="example-radio-group" formControlName="sugar" #sugar>
					<mat-radio-button class="mr-2" value=1 [checked]="medicalRecord.details.clinicalUrineTests.sugar == 1">
						Dương tính
					</mat-radio-button>
					<mat-radio-button value=0 [checked]="medicalRecord.details.clinicalUrineTests.sugar == 0">
						Âm tính
					</mat-radio-button>
				</mat-radio-group>
				<div class="invalid-feedback d-block" *ngIf="showErrors && isError(updateClinicalUrineTestsForm, 'sugar')">Không được để trống</div>
			</div>
			<div class="form-group col-sm-6">
				<label for="protein" class="mr-2 w-100">Protein</label>
				<mat-radio-group class="example-radio-group" formControlName="protein" #protein>
					<mat-radio-button class="mr-2" value=1 [checked]="medicalRecord.details.clinicalUrineTests.protein == 1">
						Dương tính
					</mat-radio-button>
					<mat-radio-button value=0 [checked]="medicalRecord.details.clinicalUrineTests.protein == 0">
						Âm tính
					</mat-radio-button>
				</mat-radio-group>
				<div class="invalid-feedback d-block" *ngIf="showErrors && isError(updateClinicalUrineTestsForm, 'protein')">Không được để trống</div>
			</div>
		</div>
		<div class="form-group">
			<label for="other">Khác (nếu có)</label>
			<textarea #other class="form-control" rows="2" formControlName="other"></textarea>
		</div>
		<div class=" mt-2 d-flex justify-content-end">
			<button type="submit" class="btn btn-primary mb-5 ">Ghi nội dung</button>
		</div>
	</form>
	<div *ngIf="!this.medicalRecord.details.clinicalUrineTests.isRegistered" class="text-center">
		<h3 class="btn btn-warning">Bệnh nhân không đăng ký khám dịch vụ này</h3>
	</div>
</div>

<div *ngIf="medicalRecord == null" class="text-center">
	<h1 class="text-center mt-5 btn btn-info">Xin mời chọn bệnh án</h1>
</div>

<ngx-spinner fullScreen=false color="#fff" type="ball-clip-rotate">
</ngx-spinner>